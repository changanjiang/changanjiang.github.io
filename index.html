<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/child/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/child/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/child/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/child/images/logo.svg" color="#222">

<link rel="stylesheet" href="/child/changan/css/main.css">


<link rel="stylesheet" href="/child/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/child/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="欢迎您的到来！">
<meta property="og:type" content="website">
<meta property="og:title" content="威猛的小老虎">
<meta property="og:url" content="http://example.com/child/index.html">
<meta property="og:site_name" content="威猛的小老虎">
<meta property="og:description" content="欢迎您的到来！">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="changan">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/child/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>威猛的小老虎</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/child/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">威猛的小老虎</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/child/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/child/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/portainer%E6%90%AD%E5%BB%BA/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/portainer%E6%90%AD%E5%BB%BA/" class="post-title-link" itemprop="url">portainer搭建</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 17:31:31 / 修改时间：17:33:29" itemprop="dateCreated datePublished" datetime="2021-02-04T17:31:31+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="假设有了docker-环境"><a href="#假设有了docker-环境" class="headerlink" title="假设有了docker 环境"></a>假设有了docker 环境</h3><ul>
<li>首先拉取镜像 <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull docker.io&#x2F;portainer&#x2F;portainer</span><br></pre></td></tr></table></figure></li>
<li>开启docker的远程管理<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim &#x2F;lib&#x2F;systemd&#x2F;system&#x2F;docker.service</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;dockerd -H unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock -H tcp:&#x2F;&#x2F;0.0.0.0:2375</span><br></pre></td></tr></table></figure></li>
<li>重新加载配置重启docker<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl daemon-reload </span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></li>
<li>检查防火墙状态-关闭防火墙<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl status firewalld</span><br><span class="line">systemctl stop firewalld</span><br></pre></td></tr></table></figure></li>
<li>启动容器<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -p 14001:9000 --restart&#x3D;always -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock --name prtainer portainer&#x2F;portainer</span><br></pre></td></tr></table></figure></li>
<li>访问<a target="_blank" rel="noopener" href="http://ip:14001/%E7%99%BB%E5%BD%95">http://ip:14001/登录</a></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/py%E6%93%8D%E4%BD%9CMongoDB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/py%E6%93%8D%E4%BD%9CMongoDB/" class="post-title-link" itemprop="url">py操作MongoDB</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 17:28:43 / 修改时间：17:29:56" itemprop="dateCreated datePublished" datetime="2021-02-04T17:28:43+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>MongoDB是由C++语言编写的非关系型数据库，是一个基于分布式文件存储的开源数据库系统，其内容存储形式类似JSON对象，它的字段值可以包含其他文档、数组及文档数组，非常灵活。在这一节中，我们就来看看Python 3下MongoDB的存储操作。</p>
<p><strong>1. 准备工作</strong></p>
<p>在开始之前，请确保已经安装好了MongoDB并启动了其服务，并且安装好了Python的PyMongo库。</p>
<p><strong>2. 连接MongoDB</strong></p>
<p>连接MongoDB时，我们需要使用PyMongo库里面的MongoClient。一般来说，传入MongoDB的IP及端口即可，其中第一个参数为地址host，第二个参数为端口port（如果不给它传递参数，默认是27017）：</p>
<p>import pymongo client = pymongo.MongoClient(host=’localhost’, port=27017)复制代码</p>
<p>这样就可以创建MongoDB的连接对象了。</p>
<p>另外，MongoClient的第一个参数host还可以直接传入MongoDB的连接字符串，它以mongodb开头，例如：</p>
<p>client = MongoClient(‘mongodb://localhost:27017/‘)复制代码</p>
<p>这也可以达到同样的连接效果。</p>
<p><strong>3. 指定数据库</strong></p>
<p>MongoDB中可以建立多个数据库，接下来我们需要指定操作哪个数据库。这里我们以test数据库为例来说明，下一步需要在程序中指定要使用的数据库：</p>
<p>db = client.test复制代码</p>
<p>这里调用client的test属性即可返回test数据库。当然，我们也可以这样指定：</p>
<p>db = client[‘test’]复制代码</p>
<p>这两种方式是等价的。</p>
<p><strong>4. 指定集合</strong></p>
<p>MongoDB的每个数据库又包含许多集合（collection），它们类似于关系型数据库中的表。</p>
<p>下一步需要指定要操作的集合，这里指定一个集合名称为students。与指定数据库类似，指定集合也有两种方式：</p>
<p>collection = db.students复制代码</p>
<p>collection = db[‘students’]复制代码</p>
<p>这样我们便声明了一个Collection对象。</p>
<p><strong>5. 插入数据</strong></p>
<p>接下来，便可以插入数据了。对于students这个集合，新建一条学生数据，这条数据以字典形式表示：</p>
<p>student = {    ‘id’: ‘20170101’,    ‘name’: ‘Jordan’,    ‘age’: 20,    ‘gender’: ‘male’ }复制代码</p>
<p>这里指定了学生的学号、姓名、年龄和性别。接下来，直接调用collection的insert()方法即可插入数据，代码如下：</p>
<p>result = collection.insert(student) print(result)复制代码</p>
<p>在MongoDB中，每条数据其实都有一个_id属性来唯一标识。如果没有显式指明该属性，MongoDB会自动产生一个ObjectId类型的_id属性。insert()方法会在执行后返回_id值。</p>
<p>运行结果如下：</p>
<p>5932a68615c2606814c91f3d复制代码</p>
<p>当然，我们也可以同时插入多条数据，只需要以列表形式传递即可，示例如下：</p>
<p>student1 = {    ‘id’: ‘20170101’,    ‘name’: ‘Jordan’,    ‘age’: 20,    ‘gender’: ‘male’ } student2 = {    ‘id’: ‘20170202’,    ‘name’: ‘Mike’,    ‘age’: 21,    ‘gender’: ‘male’ } result = collection.insert([student1, student2]) print(result)复制代码</p>
<p>返回结果是对应的_id的集合：</p>
<p>[ObjectId(‘5932a80115c2606a59e8a048’), ObjectId(‘5932a80115c2606a59e8a049’)]复制代码</p>
<p>实际上，在PyMongo 3.x版本中，官方已经不推荐使用insert()方法了。当然，继续使用也没有什么问题。官方推荐使用insert_one()和insert_many()方法来分别插入单条记录和多条记录，示例如下：</p>
<p>student = {    ‘id’: ‘20170101’,    ‘name’: ‘Jordan’,    ‘age’: 20,    ‘gender’: ‘male’ } result = collection.insert_one(student) print(result) print(result.inserted_id)复制代码</p>
<p>运行结果如下：</p>
<p>&lt;pymongo.results.InsertOneResult object at 0x10d68b558&gt; 5932ab0f15c2606f0c1cf6c5复制代码</p>
<p>与insert()方法不同，这次返回的是InsertOneResult对象，我们可以调用其inserted_id属性获取_id。</p>
<p>对于insert_many()方法，我们可以将数据以列表形式传递，示例如下：</p>
<p>student1 = {    ‘id’: ‘20170101’,    ‘name’: ‘Jordan’,    ‘age’: 20,    ‘gender’: ‘male’ } student2 = {    ‘id’: ‘20170202’,    ‘name’: ‘Mike’,    ‘age’: 21,    ‘gender’: ‘male’ } result = collection.insert_many([student1, student2]) print(result) print(result.inserted_ids)复制代码</p>
<p>运行结果如下：</p>
<p>&lt;pymongo.results.InsertManyResult object at 0x101dea558&gt; [ObjectId(‘5932abf415c2607083d3b2ac’), ObjectId(‘5932abf415c2607083d3b2ad’)]复制代码</p>
<p>该方法返回的类型是InsertManyResult，调用inserted_ids属性可以获取插入数据的_id列表。</p>
<p><strong>6. 查询</strong></p>
<p>插入数据后，我们可以利用find_one()或find()方法进行查询，其中find_one()查询得到的是单个结果，find()则返回一个生成器对象。示例如下：</p>
<p>result = collection.find_one({‘name’: ‘Mike’}) print(type(result)) print(result)复制代码</p>
<p>这里我们查询name为Mike的数据，它的返回结果是字典类型，运行结果如下：</p>
<p>&lt;class ‘dict’&gt; {‘_id’: ObjectId(‘5932a80115c2606a59e8a049’), ‘id’: ‘20170202’, ‘name’: ‘Mike’, ‘age’: 21, ‘gender’: ‘male’}复制代码</p>
<p>可以发现，它多了_id属性，这就是MongoDB在插入过程中自动添加的。</p>
<p>此外，我们也可以根据ObjectId来查询，此时需要使用bson库里面的objectid：</p>
<p>from bson.objectid import ObjectId result = collection.find_one({‘_id’: ObjectId(‘593278c115c2602667ec6bae’)}) print(result)复制代码</p>
<p>其查询结果依然是字典类型，具体如下：</p>
<p>{‘_id’: ObjectId(‘593278c115c2602667ec6bae’), ‘id’: ‘20170101’, ‘name’: ‘Jordan’, ‘age’: 20, ‘gender’: ‘male’}复制代码</p>
<p>当然，如果查询结果不存在，则会返回None。</p>
<p>对于多条数据的查询，我们可以使用find()方法。例如，这里查找年龄为20的数据，示例如下：</p>
<p>results = collection.find({‘age’: 20}) print(results) <strong>for</strong> result <strong>in</strong> results:    print(result)复制代码</p>
<p>运行结果如下：</p>
<p>&lt;pymongo.cursor.Cursor object at 0x1032d5128&gt; {‘_id’: ObjectId(‘593278c115c2602667ec6bae’), ‘id’: ‘20170101’, ‘name’: ‘Jordan’, ‘age’: 20, ‘gender’: ‘male’} {‘_id’: ObjectId(‘593278c815c2602678bb2b8d’), ‘id’: ‘20170102’, ‘name’: ‘Kevin’, ‘age’: 20, ‘gender’: ‘male’} {‘_id’: ObjectId(‘593278d815c260269d7645a8’), ‘id’: ‘20170103’, ‘name’: ‘Harden’, ‘age’: 20, ‘gender’: ‘male’}复制代码</p>
<p>返回结果是Cursor类型，它相当于一个生成器，我们需要遍历取到所有的结果，其中每个结果都是字典类型。</p>
<p>如果要查询年龄大于20的数据，则写法如下：</p>
<p>results = collection.find({‘age’: {‘$gt’: 20}})复制代码</p>
<p>这里查询的条件键值已经不是单纯的数字了，而是一个字典，其键名为比较符号$gt，意思是大于，键值为20。</p>
<p>这里将比较符号归纳为下表。</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>$lt</td>
<td>小于</td>
<td>{‘age’: {‘$lt’: 20}}</td>
</tr>
<tr>
<td>$gt</td>
<td>大于</td>
<td>{‘age’: {‘$gt’: 20}}</td>
</tr>
<tr>
<td>$lte</td>
<td>小于等于</td>
<td>{‘age’: {‘$lte’: 20}}</td>
</tr>
<tr>
<td>$gte</td>
<td>大于等于</td>
<td>{‘age’: {‘$gte’: 20}}</td>
</tr>
<tr>
<td>$ne</td>
<td>不等于</td>
<td>{‘age’: {‘$ne’: 20}}</td>
</tr>
<tr>
<td>$in</td>
<td>在范围内</td>
<td>{‘age’: {‘$in’: [20, 23]}}</td>
</tr>
<tr>
<td>$nin</td>
<td>不在范围内</td>
<td>{‘age’: {‘$nin’: [20, 23]}}</td>
</tr>
</tbody></table>
<p>另外，还可以进行正则匹配查询。例如，查询名字以M开头的学生数据，示例如下：</p>
<p>results = collection.find({‘name’: {‘$regex’: ‘^M.*’}})复制代码</p>
<p>这里使用$regex来指定正则匹配，^M.*代表以M开头的正则表达式。</p>
<p>这里将一些功能符号再归类为下表。</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
<th>示例</th>
<th>示例含义</th>
</tr>
</thead>
<tbody><tr>
<td>$regex</td>
<td>匹配正则表达式</td>
<td>{‘name’: {‘$regex’: ‘^M.*’}}</td>
<td>name以M开头</td>
</tr>
<tr>
<td>$exists</td>
<td>属性是否存在</td>
<td>{‘name’: {‘$exists’: True}}</td>
<td>name属性存在</td>
</tr>
<tr>
<td>$type</td>
<td>类型判断</td>
<td>{‘age’: {‘$type’: ‘int’}}</td>
<td>age的类型为int</td>
</tr>
<tr>
<td>$mod</td>
<td>数字模操作</td>
<td>{‘age’: {‘$mod’: [5, 0]}}</td>
<td>年龄模5余0</td>
</tr>
<tr>
<td>$text</td>
<td>文本查询</td>
<td>{‘$text’: {‘$search’: ‘Mike’}}</td>
<td>text类型的属性中包含Mike字符串</td>
</tr>
<tr>
<td>$where</td>
<td>高级条件查询</td>
<td>{‘$where’: ‘obj.fans_count == obj.follows_count’}</td>
<td>自身粉丝数等于关注数</td>
</tr>
</tbody></table>
<p>关于这些操作的更详细用法，可以在MongoDB官方文档找到：</p>
<p><a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/operator/query/%E3%80%82">https://docs.mongodb.com/manual/reference/operator/query/。</a></p>
<p><strong>7. 计数</strong></p>
<p>要统计查询结果有多少条数据，可以调用count()方法。比如，统计所有数据条数：</p>
<p>count = collection.find().count() print(count)复制代码</p>
<p>或者统计符合某个条件的数据：</p>
<p>count = collection.find({‘age’: 20}).count() print(count)复制代码</p>
<p>运行结果是一个数值，即符合条件的数据条数。</p>
<p><strong>8. 排序</strong></p>
<p>排序时，直接调用sort()方法，并在其中传入排序的字段及升降序标志即可。示例如下：</p>
<p>results = collection.find().sort(‘name’, pymongo.ASCENDING) print([result[‘name’] <strong>for</strong> result <strong>in</strong> results])复制代码</p>
<p>运行结果如下：</p>
<p>[‘Harden’, ‘Jordan’, ‘Kevin’, ‘Mark’, ‘Mike’]复制代码</p>
<p>这里我们调用pymongo.ASCENDING指定升序。如果要降序排列，可以传入pymongo.DESCENDING。</p>
<p><strong>9. 偏移</strong></p>
<p>在某些情况下，我们可能想只取某几个元素，这时可以利用skip()方法偏移几个位置，比如偏移2，就忽略前两个元素，得到第三个及以后的元素：</p>
<p>results = collection.find().sort(‘name’, pymongo.ASCENDING).skip(2) print([result[‘name’] <strong>for</strong> result <strong>in</strong> results])复制代码</p>
<p>运行结果如下：</p>
<p>[‘Kevin’, ‘Mark’, ‘Mike’]复制代码</p>
<p>另外，还可以用limit()方法指定要取的结果个数，示例如下：</p>
<p>results = collection.find().sort(‘name’, pymongo.ASCENDING).skip(2).limit(2) print([result[‘name’] <strong>for</strong> result <strong>in</strong> results])复制代码</p>
<p>运行结果如下：</p>
<p>[‘Kevin’, ‘Mark’]复制代码</p>
<p>如果不使用limit()方法，原本会返回三个结果，加了限制后，会截取两个结果返回。</p>
<p>值得注意的是，在数据库数量非常庞大的时候，如千万、亿级别，最好不要使用大的偏移量来查询数据，因为这样很可能导致内存溢出。此时可以使用类似如下操作来查询：</p>
<p>from bson.objectid import ObjectId collection.find({‘_id’: {‘$gt’: ObjectId(‘593278c815c2602678bb2b8d’)}})复制代码</p>
<p>这时需要记录好上次查询的_id。</p>
<p><strong>10. 更新</strong></p>
<p>对于数据更新，我们可以使用update()方法，指定更新的条件和更新后的数据即可。例如：</p>
<p>condition = {‘name’: ‘Kevin’} student = collection.find_one(condition) student[‘age’] = 25 result = collection.update(condition, student) print(result)复制代码</p>
<p>这里我们要更新name为Kevin的数据的年龄：首先指定查询条件，然后将数据查询出来，修改年龄后调用update()方法将原条件和修改后的数据传入。</p>
<p>运行结果如下：</p>
<p>{‘ok’: 1, ‘nModified’: 1, ‘n’: 1, ‘updatedExisting’: True}复制代码</p>
<p>返回结果是字典形式，ok代表执行成功，nModified代表影响的数据条数。</p>
<p>另外，我们也可以使用$set操作符对数据进行更新，代码如下：</p>
<p>result = collection.update(condition, {‘$set’: student})复制代码</p>
<p>这样可以只更新student字典内存在的字段。如果原先还有其他字段，则不会更新，也不会删除。而如果不用$set的话，则会把之前的数据全部用student字典替换；如果原本存在其他字段，则会被删除。</p>
<p>另外，update()方法其实也是官方不推荐使用的方法。这里也分为update_one()方法和update_many()方法，用法更加严格，它们的第二个参数需要使用$类型操作符作为字典的键名，示例如下：</p>
<p>condition = {‘name’: ‘Kevin’} student = collection.find_one(condition) student[‘age’] = 26 result = collection.update_one(condition, {‘$set’: student}) print(result) print(result.matched_count, result.modified_count)复制代码</p>
<p>这里调用了update_one()方法，第二个参数不能再直接传入修改后的字典，而是需要使用{‘$set’: student}这样的形式，其返回结果是UpdateResult类型。然后分别调用matched_count和modified_count属性，可以获得匹配的数据条数和影响的数据条数。</p>
<p>运行结果如下：</p>
<p>&lt;pymongo.results.UpdateResult object at 0x10d17b678&gt; 1 0复制代码</p>
<p>我们再看一个例子：</p>
<p>condition = {‘age’: {‘$gt’: 20}} result = collection.update_one(condition, {‘$inc’: {‘age’: 1}}) print(result) print(result.matched_count, result.modified_count)复制代码</p>
<p>这里指定查询条件为年龄大于20，然后更新条件为{‘$inc’: {‘age’: 1}}，也就是年龄加1，执行之后会将第一条符合条件的数据年龄加1。</p>
<p>运行结果如下：</p>
<p>&lt;pymongo.results.UpdateResult object at 0x10b8874c8&gt; 1 1复制代码</p>
<p>可以看到匹配条数为1条，影响条数也为1条。</p>
<p>如果调用update_many()方法，则会将所有符合条件的数据都更新，示例如下：</p>
<p>condition = {‘age’: {‘$gt’: 20}} result = collection.update_many(condition, {‘$inc’: {‘age’: 1}}) print(result) print(result.matched_count, result.modified_count)复制代码</p>
<p>这时匹配条数就不再为1条了，运行结果如下：</p>
<p>&lt;pymongo.results.UpdateResult object at 0x10c6384c8&gt; 3 3复制代码</p>
<p>可以看到，这时所有匹配到的数据都会被更新。</p>
<p><strong>11. 删除</strong></p>
<p>删除操作比较简单，直接调用remove()方法指定删除的条件即可，此时符合条件的所有数据均会被删除。示例如下：</p>
<p>result = collection.remove({‘name’: ‘Kevin’}) print(result)复制代码</p>
<p>运行结果如下：</p>
<p>{‘ok’: 1, ‘n’: 1}复制代码</p>
<p>另外，这里依然存在两个新的推荐方法——delete_one()和delete_many()。示例如下：</p>
<p>result = collection.delete_one({‘name’: ‘Kevin’}) print(result) print(result.deleted_count) result = collection.delete_many({‘age’: {‘$lt’: 25}}) print(result.deleted_count)复制代码</p>
<p>运行结果如下：</p>
<p>&lt;pymongo.results.DeleteResult object at 0x10e6ba4c8&gt; 1 4复制代码</p>
<p>delete_one()即删除第一条符合条件的数据，delete_many()即删除所有符合条件的数据。它们的返回结果都是DeleteResult类型，可以调用deleted_count属性获取删除的数据条数。</p>
<p><strong>12. 其他操作</strong></p>
<p>另外，PyMongo还提供了一些组合方法，如find_one_and_delete()、find_one_and_replace()和find_one_and_update()，它们是查找后删除、替换和更新操作，其用法与上述方法基本一致。</p>
<p>另外，还可以对索引进行操作，相关方法有create_index()、create_indexes()和drop_index()等。</p>
<p>关于PyMongo的详细用法，可以参见官方文档：<a target="_blank" rel="noopener" href="http://api.mongodb.com/python/current/api/pymongo/collection.html%E3%80%82">http://api.mongodb.com/python/current/api/pymongo/collection.html。</a></p>
<p>另外，还有对数据库和集合本身等的一些操作，这里不再一一讲解，可以参见官方文档：<a target="_blank" rel="noopener" href="http://api.mongodb.com/python/current/api/pymongo/%E3%80%82">http://api.mongodb.com/python/current/api/pymongo/。</a></p>
<p>本节讲解了使用PyMongo操作MongoDB进行数据增删改查的方法。</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/Mongo%E4%B8%8EMysql%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BA%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/Mongo%E4%B8%8EMysql%E7%9A%84%E4%B8%80%E4%BA%9B%E4%BA%8B/" class="post-title-link" itemprop="url">Mongo与Mysql的一些事</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 17:26:37 / 修改时间：17:27:31" itemprop="dateCreated datePublished" datetime="2021-02-04T17:26:37+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Mongo db 与mysql 语法比较</p>
<p>传统的关系数据库一般由数据库（database）、表（table）、记录（record）三个层次概念组成，MongoDB是由数据库（database）、集合（collection）、文档对象（document）三个层次组成。MongoDB对于关系型数据库里的表，但是集合中没有列、行和关系概念，这体现了模式自由的特点。</p>
<table>
<thead>
<tr>
<th>MySQL</th>
<th>MongoDB</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>mysqld</td>
<td>mongod</td>
<td>服务器守护进程</td>
</tr>
<tr>
<td>mysql</td>
<td>mongo</td>
<td>客户端工具</td>
</tr>
<tr>
<td>mysqldump</td>
<td>mongodump</td>
<td>逻辑备份工具</td>
</tr>
<tr>
<td>mysql</td>
<td>mongorestore</td>
<td>逻辑恢复工具</td>
</tr>
<tr>
<td></td>
<td>db.repairDatabase()</td>
<td>修复数据库</td>
</tr>
<tr>
<td>mysqldump</td>
<td>mongoexport</td>
<td>数据导出工具</td>
</tr>
<tr>
<td>source</td>
<td>mongoimport</td>
<td>数据导入工具</td>
</tr>
<tr>
<td>grant * privileges on <em>.</em> to …</td>
<td>Db.addUser() Db.auth()</td>
<td>新建用户并权限</td>
</tr>
<tr>
<td>show databases</td>
<td>show dbs</td>
<td>显示库列表</td>
</tr>
<tr>
<td>Show tables</td>
<td>Show collections</td>
<td>显示表列表</td>
</tr>
<tr>
<td>Show slave status</td>
<td>Rs.status</td>
<td>查询主从状态</td>
</tr>
<tr>
<td>Create table users(a int, b int)</td>
<td>db.createCollection(“mycoll”, {capped:true,size:100000}) 另：mongo可隐式创建表。</td>
<td>创建表</td>
</tr>
<tr>
<td>Create INDEX idxname ON users(name)</td>
<td>db.users.ensureIndex({name:1})</td>
<td>创建索引</td>
</tr>
<tr>
<td>Create INDEX idxname ON users(name,ts DESC)</td>
<td>db.users.ensureIndex({name:1,ts:-1})</td>
<td>创建索引</td>
</tr>
<tr>
<td>Insert into users values(1, 1)</td>
<td>db.users.insert({a:1, b:1})</td>
<td>插入记录</td>
</tr>
<tr>
<td>Select a, b from users</td>
<td>db.users.find({},{a:1, b:1})</td>
<td>查询表</td>
</tr>
<tr>
<td>Select * from users</td>
<td>db.users.find()</td>
<td>查询表</td>
</tr>
<tr>
<td>Select * from users where age=33</td>
<td>db.users.find({age:33})</td>
<td>条件查询</td>
</tr>
<tr>
<td>Select a, b from users where age=33</td>
<td>db.users.find({age:33},{a:1, b:1})</td>
<td>条件查询</td>
</tr>
<tr>
<td>select * from users where age&lt;33</td>
<td>db.users.find({‘age’:{$lt:33}})</td>
<td>条件查询</td>
</tr>
<tr>
<td>select * from users where age&gt;33 and age&lt;=40</td>
<td>db.users.find({‘age’:{$gt:33,$lte:40}})</td>
<td>条件查询</td>
</tr>
<tr>
<td>select * from users where a=1 and b=’q’</td>
<td>db.users.find({a:1,b:’q’})</td>
<td>条件查询</td>
</tr>
<tr>
<td>select * from users where a=1 or b=2</td>
<td>db.users.find( { $or : [ { a : 1 } , { b : 2 } ] } )</td>
<td>条件查询</td>
</tr>
<tr>
<td>select * from users limit 1</td>
<td>db.users.findOne()</td>
<td>条件查询</td>
</tr>
<tr>
<td>select * from users where name like “%Joe%”</td>
<td>db.users.find({name:/Joe/})</td>
<td>模糊查询</td>
</tr>
<tr>
<td>select * from users where name like “Joe%”</td>
<td>db.users.find({name:/^Joe/})</td>
<td>模糊查询</td>
</tr>
<tr>
<td>select count(1) from users</td>
<td>Db.users.count()</td>
<td>获取表记录数</td>
</tr>
<tr>
<td>select count(1) from users where age&gt;30</td>
<td>db.users.find({age: {‘$gt’: 30}}).count()</td>
<td>获取表记录数</td>
</tr>
<tr>
<td>select DISTINCT last_name from users</td>
<td>db.users.distinct(‘last_name’)</td>
<td>去掉重复值</td>
</tr>
<tr>
<td>select * from users ORDER BY name</td>
<td>db.users.find().sort({name:-1})</td>
<td>排序</td>
</tr>
<tr>
<td>select * from users ORDER BY name DESC</td>
<td>db.users.find().sort({name:-1})</td>
<td>排序</td>
</tr>
<tr>
<td>EXPLAIN select * from users where z=3</td>
<td>db.users.find({z:3}).explain()</td>
<td>获取存储路径</td>
</tr>
<tr>
<td>update users set a=1 where b=’q’</td>
<td>db.users.update({b:’q’}, {$set:{a:1}}, false, true)</td>
<td>更新记录</td>
</tr>
<tr>
<td>update users set a=a+2 where b=’q’</td>
<td>db.users.update({b:’q’}, {$inc:{a:2}}, false, true)</td>
<td>更新记录</td>
</tr>
<tr>
<td>delete from users where z=”abc”</td>
<td>db.users.remove({z:’abc’})</td>
<td>删除记录</td>
</tr>
<tr>
<td></td>
<td>db. users.remove()</td>
<td>删除所有的记录</td>
</tr>
<tr>
<td>drop database IF EXISTS test;</td>
<td>use test db.dropDatabase()</td>
<td>删除数据库</td>
</tr>
<tr>
<td>drop table IF EXISTS test;</td>
<td>db.mytable.drop()</td>
<td>删除表/collection</td>
</tr>
<tr>
<td></td>
<td>db.addUser(‘test’, ‘test’)</td>
<td>添加用户 readOnly–&gt;false</td>
</tr>
<tr>
<td></td>
<td>db.addUser(‘test’, ‘test’, true)</td>
<td>添加用户 readOnly–&gt;true</td>
</tr>
<tr>
<td></td>
<td>db.addUser(“test”,”test222”)</td>
<td>更改密码</td>
</tr>
<tr>
<td></td>
<td>db.system.users.remove({user:”test”}) 或者 db.removeUser(‘test’)</td>
<td>删除用户</td>
</tr>
<tr>
<td></td>
<td>use admin</td>
<td>超级用户</td>
</tr>
<tr>
<td></td>
<td>db.auth(‘test’, ‘test’)</td>
<td>用户授权</td>
</tr>
<tr>
<td></td>
<td>db.system.users.find()</td>
<td>查看用户列表</td>
</tr>
<tr>
<td></td>
<td>show users</td>
<td>查看所有用户</td>
</tr>
<tr>
<td></td>
<td>db.printCollectionStats()</td>
<td>查看各collection的状态</td>
</tr>
<tr>
<td></td>
<td>db.printReplicationInfo()</td>
<td>查看主从复制状态</td>
</tr>
<tr>
<td></td>
<td>show profile</td>
<td>查看profiling</td>
</tr>
<tr>
<td></td>
<td>db.copyDatabase(‘mail_addr’,’mail_addr_tmp’)</td>
<td>拷贝数据库</td>
</tr>
<tr>
<td></td>
<td>db.users.dataSize()</td>
<td>查看collection数据的大小</td>
</tr>
<tr>
<td></td>
<td>db. users.totalIndexSize()</td>
<td>查询索引的大小</td>
</tr>
</tbody></table>
<p>db.getCollection(‘sp_ershoufang’).find({‘updateDate’:’2019-04-10’, ‘totalPrice’:{$gte:100,$lte:150}, ‘regions.district’:’龙岗’, ‘houseType’:{ $regex:’2室’, $options: ‘i’}}).sort({totalPrice:1, unitPrice:1})</p>
<p><strong>1.验证删除数据后用db.serverStatus().mem命令查看的</strong>磁盘空间<strong>占用是否变化</strong></p>
<p><strong>结论：删除collection内的数据不会释放磁盘空间；</strong></p>
<p><strong>可以采用db.runCommand({closeAllDatabases:1}):</strong></p>
<p>进入删除了数据的db,采用**db.repairDatabase()**：</p>
<p>mongodb语法</p>
<p>MongoDB的好处很多，比如多列索引，查询时可以用一些统计函数，支持多条件查询，但是目前多表查询是不支持的，可以想办法通过数据冗余来解决多表查询的问题。</p>
<p>MongoDB对数据的操作很丰富，下面做一些举例说明，内容大部分来自官方文档，另外有部分为自己理解。</p>
<p>查询colls所有数据</p>
<p>db.colls.find() //select * from colls</p>
<p>通过指定条件查询</p>
<p>db.colls.find({‘last_name’: ‘Smith’});//select * from colls where last_name=’Smith’</p>
<p>指定多条件查询</p>
<p>db.colls.find( { x : 3, y : “foo” } );//select * from colls where x=3 and y=’foo’</p>
<p>指定条件范围查询</p>
<p>db.colls.find({j: {$ne: 3}, k: {$gt: 10} });//select * from colls where j!=3 and k&gt;10</p>
<p>查询不包括某内容</p>
<p>db.colls.find({}, {a:0});//查询除a为0外的所有数据</p>
<p>支持&lt;, &lt;=, &gt;, &gt;=查询，需用符号替代分别为$lt，$lte，$gt，$gte</p>
<p>db.colls.find({ “field” : { $gt: value } } );</p>
<p>db.colls.find({ “field” : { $lt: value } } );</p>
<p>db.colls.find({ “field” : { $gte: value } } );</p>
<p>db.colls.find({ “field” : { $lte: value } } );</p>
<p>也可对某一字段做范围查询</p>
<p>db.colls.find({ “field” : { $gt: value1, $lt: value2 } } );</p>
<p>不等于查询用字符$ne</p>
<p>db.colls.find( { x : { $ne : 3 } } );</p>
<p>in查询用字符$in</p>
<p>db.colls.find( { “field” : { $in : array } } );</p>
<p>db.colls.find({j:{$in: [2,4,6]}});</p>
<p>not in查询用字符$nin</p>
<p>db.colls.find({j:{$nin: [2,4,6]}});</p>
<p>取模查询用字符$mod</p>
<p>db.colls.find( { a : { $mod : [ 10 , 1 ] } } )// where a % 10 == 1</p>
<p>$all查询</p>
<p>db.colls.find( { a: { $all: [ 2, 3 ] } } );//指定a满足数组中任意值时</p>
<p>$size查询</p>
<p>db.colls.find( { a : { $size: 1 } } );//对对象的数量查询，此查询查询a的子对象数目为1的记录</p>
<p>$exists查询</p>
<p>db.colls.find( { a : { $exists : true } } ); // 存在a对象的数据</p>
<p>db.colls.find( { a : { $exists : false } } ); // 不存在a对象的数据</p>
<p>$type查询$type值为bson<a target="_blank" rel="noopener" href="http://bsonspec.org/%E6%95%B0">http://bsonspec.org/数</a> 据的类型值</p>
<p>db.colls.find( { a : { $type : 2 } } ); // 匹配a为string类型数据</p>
<p>db.colls.find( { a : { $type : 16 } } ); // 匹配a为int类型数据</p>
<p>使用正则表达式匹配</p>
<p>db.colls.find( { name : /acme.*corp/i } );//类似于SQL中like</p>
<p>内嵌对象查询</p>
<p>db.colls.find( { “author.name” : “joe” } );</p>
<p>1.3.3版本及更高版本包含$not查询</p>
<p>db.colls.find( { name : { $not : /acme.*corp/i } } );</p>
<p>db.colls.find( { a : { $not : { $mod : [ 10 , 1 ] } } } );</p>
<p>sort()排序</p>
<p>db.colls.find().sort( { ts : -1 } );//1为升序2为降序</p>
<p>limit()对限制查询数据返回个数</p>
<p>db.colls.find().limit(10)</p>
<p>skip()跳过某些数据</p>
<p>db.colls.find().skip(10)</p>
<p>mongo更新一个字段为另一个字段的值</p>
<p>db.getCollection(‘house_2018-11-21’).find().forEach(</p>
<p>function(e) {</p>
<p>​         e.area = int(e.total_price*10000/ e.unit_price);</p>
<p>​         db.getCollection(‘house_2018-11-21’).save(e)</p>
<p>});</p>
<p><strong>group分组查询。</strong></p>
<p>参数说明：</p>
<ul>
<li>key：用来分组文档的字段。</li>
<li>initial: 每组都分享一个”初始化函数“</li>
<li>$reduce: 执行的reduce函数，第一个参数是当前的文档对象，第二个参数是上一次function操作的累计对象，有多少个文档， $reduce就会调用多少次。</li>
<li>condition：（可选）执行过滤的条件</li>
<li>finalize：（可选）在reduce执行完成，结果集返回之前对结果集最终执行的函数。</li>
</ul>
<p>例如，我们按年级分组，查出每个年级的学生姓名：</p>
<p>db.students.group({ key:{grade:true}, initial:{stuNames:[], count:0}, $reduce:function(cur, prev){ prev.stuNames.push(cur.name); } })</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/Flex%E7%9A%84%E5%B8%83%E5%B1%80%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/Flex%E7%9A%84%E5%B8%83%E5%B1%80%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">Flex的布局使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 17:21:28 / 修改时间：17:22:38" itemprop="dateCreated datePublished" datetime="2021-02-04T17:21:28+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Flex布局的学习"><a href="#Flex布局的学习" class="headerlink" title="Flex布局的学习"></a>Flex布局的学习</h2><ul>
<li>网页布局是CSS的一个重点应用</li>
<li>布局传统有很多种解决方法，常用的盒子模型,他们依赖display,position,float等,对于有一些特殊的布局不是很好解决,比如垂直居中…</li>
<li>Flex是诞生就是为了解决这些布局,它简洁、方便、完整，响应式地实现了各种页面布局。</li>
</ul>
<h2 id="Flex布局是什么"><a href="#Flex布局是什么" class="headerlink" title="Flex布局是什么"></a>Flex布局是什么</h2><ul>
<li>任何一个容器都可以指定为Flex布局,只要加上dispaly:flex<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dispaly: flex;</span><br></pre></td></tr></table></figure></li>
<li>WebKit内核的浏览器,必须要加上-webkit前缀,也就是:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dispalt: -webkit-flex;</span><br></pre></td></tr></table></figure></li>
<li>还有一点需要注意的,如果使用了flex布局,它的子元素的float、clear和vertical-align都将会失效</li>
</ul>
<h2 id="flex的基本概念"><a href="#flex的基本概念" class="headerlink" title="flex的基本概念"></a>flex的基本概念</h2><h3 id="flex容器的结构-flex容器存在两根轴-主-水平-轴和交叉-交叉-轴。"><a href="#flex容器的结构-flex容器存在两根轴-主-水平-轴和交叉-交叉-轴。" class="headerlink" title="flex容器的结构- flex容器存在两根轴,主(水平)轴和交叉(交叉)轴。"></a>flex容器的结构- flex容器存在两根轴,主(水平)轴和交叉(交叉)轴。</h3><h3 id="flex的属性"><a href="#flex的属性" class="headerlink" title="flex的属性:"></a>flex的属性:</h3><ul>
<li>flex有6个属性可以设置在容器上,分别是:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">- flex-direction #决定了主轴的排列方向</span><br><span class="line">- flex-wrap #定义换行的方式</span><br><span class="line">- flex-flow #flex-direction和flex-warp的简写</span><br><span class="line">- justify-content #主轴的对齐方式</span><br><span class="line">- align-items #交叉轴的对齐方式</span><br><span class="line">- align-content #定义多根轴的对齐方式</span><br></pre></td></tr></table></figure></li>
<li>属性的值:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">flex-direction: row | row-reverse | column | column-reverse; </span><br><span class="line"># 分别是: 从左到右排序  从右到左排序  从上到下排序  从下到上排序</span><br><span class="line"></span><br><span class="line">flex-wrap:  nowrap | wrap | wrap-reverse;</span><br><span class="line"># 分别是: 不换行 换行的第一行在上方  换行的第一行在下方</span><br><span class="line"></span><br><span class="line">flex-flow: &lt;flex-direction&gt; | &lt;flex-wrap&gt;</span><br><span class="line"></span><br><span class="line">justify-content:flex-start | flex-end | center | space-between | space-around;</span><br><span class="line"># 分别是:左对齐  右对齐  居中  俩端对齐  项目之间的间隔相  每个项目两侧的间隔相等。所以，项目之间的间隔比项目与边框的间隔大一倍</span><br><span class="line"></span><br><span class="line">align-items:flex-start | flex-end | center | baseline | stretch;</span><br><span class="line"># 分别是: 交叉轴的起点对齐(上方)  交叉抽的终点对齐(下方)  居中对齐 容器的第一行文字的基线对齐  stretch(默认值),如果没有设置高度或者auto,那么容器会占满整个容器的高度</span><br><span class="line"></span><br><span class="line"> align-content:flex-start | flex-end | center | space-between | space-around | stretch; </span><br><span class="line"> #这个解释不来</span><br><span class="line"> </span><br></pre></td></tr></table></figure></li>
<li>项目的属性:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">order  定义容器的排列顺序,数值越小,排列越靠前,默认为0</span><br><span class="line">flex-grow 定义容器的放大比例,默认为0,即如果存在剩余空间,也不放大</span><br><span class="line">flex-shrink 定义了容器的缩小比例,默认为1,即如果空间不足,将自动缩小容器</span><br><span class="line">flex-basis 定义了在分配多余空间之前,容器占据的主轴空间,浏览器根据这个属性,计算主轴是否还有多余的空间.它的默认值是auto,即容器的本来大小</span><br><span class="line">flex  它是flex-grow,flex-shrink和flex-basis的简写,默认值为 0 1 auto</span><br><span class="line">align-self 定义了允许单个容器和其他容器有不一样的对齐方式,它可以覆盖align-items属性,默认值为auto,表示继承父元素的align-items属性,如果没有父元素,则等同于stretch。</span><br></pre></td></tr></table></figure></li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/ratel%E7%9A%84%E4%BD%BF%E7%94%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/ratel%E7%9A%84%E4%BD%BF%E7%94%A8/" class="post-title-link" itemprop="url">ratel的使用</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 17:18:39 / 修改时间：17:42:24" itemprop="dateCreated datePublished" datetime="2021-02-04T17:18:39+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="使用ratel抓包-抓取例子：麦田app"><a href="#使用ratel抓包-抓取例子：麦田app" class="headerlink" title="使用ratel抓包,抓取例子：麦田app"></a>使用ratel抓包,抓取例子：麦田app</h4><ul>
<li>下载<a target="_blank" rel="noopener" href="https://ratel.virjar.com/#/">ratel Manager</a>,与xpose，太极类似,功能比较强大,可以自定义插件,做个人定制</li>
<li>上传app到<a target="_blank" rel="noopener" href="https://ratel.virjar.com/#/">ratel Manager</a>,感染之后下载到手机</li>
<li>使用ratel Manager扫描到以感染app</li>
<li>下载插件demo:命令如下</li>
<li><code>git clone --recursive git@git.virjar.com:ratel/ratel-demo.git</code></li>
<li>使用命令直接生成对应模板 <code>./template.sh  -m crack-wechat -a path </code> -m表示要创建的插件名称,-a 对应的是已破解感染好的apk的路径</li>
<li>生成好之后就可以编写自定义功能了</li>
<li>抓取所有http请求,分析http的所需要的参数与参数值</li>
<li>根据分析结果自行封装所需参数与参数值</li>
</ul>
<h4 id="插件实例"><a href="#插件实例" class="headerlink" title="插件实例"></a>插件实例</h4><ul>
<li>编写抓取所有app请求到log,下载ratel-demo,通过直接在HookEntry类的handleLoadPackage方法添加代码块,通过Android studio启动,使用adb监听手机http日志,启动之后:<ol>
<li><code>adb logcat -s MAITIAN_HOOK  </code>这个命令是监听请求日志</li>
<li><code>adb pull /sdcard/ratel_white_dir/com.jkrm.maitian/socketMonitor</code> 这个命令是下载存储的日志,com.jkrm.maitian是app的包名,当不确定是可以使用adb shell,然后cd到ratel_white_dir中看所有的包<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">private static final String TAG &#x3D; &quot;MAITIAN_HOOK&quot;;</span><br><span class="line">public void handleLoadPackage(final RC_LoadPackage.LoadPackageParam lpparam) &#123;</span><br><span class="line">     SocketMonitor.setPacketEventObserver(new FileLogEventObserver(new File(RatelToolKit.whiteSdcardDirPath,&quot;socketMonitor&quot;)));</span><br><span class="line">     Log.i(TAG, &quot;hook start......&quot;);</span><br><span class="line">     RposedBridge.hookAllConstructors(URL.class, new RC_MethodHook() &#123;</span><br><span class="line">         @Override</span><br><span class="line">         protected void afterHookedMethod(MethodHookParam param) throws Throwable &#123;</span><br><span class="line">             Log.i(TAG, &quot;access url: &quot;+ param.thisObject);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;);</span><br><span class="line">     Log.i(TAG, &quot;hook end&quot;);</span><br><span class="line"> &#125;    </span><br></pre></td></tr></table></figure>
<h4 id="http-源码分析"><a href="#http-源码分析" class="headerlink" title="http/源码分析"></a>http/源码分析</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">GET &#x2F;service&#x2F;houseSnd?memberId&#x3D;&amp;memberEmobName&#x3D;&amp;touristId&#x3D;&amp;touristEmobName&#x3D;&amp;pushmsg&#x3D;1&amp;PG&#x3D;1&amp;PS&#x3D;20&amp;isScore&#x3D;0&amp;X&#x3D;113.959602&amp;Y&#x3D;22.547543&amp;isAnalysis&#x3D;1&amp;appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1&amp;channelId&#x3D;maitianweb&amp;deviceId&#x3D;f9c4fb060aafd777&amp;model&#x3D;MI+8&amp;platform&#x3D;android&amp;systemVersion&#x3D;10&amp;versionCode&#x3D;55&amp;versionName&#x3D;3.2.2 HTTP&#x2F;1.1</span><br><span class="line">Content-Length: 0</span><br><span class="line">Host: app.maitian.cn</span><br><span class="line">Authorization: Digest username&#x3D;aos384e9f87,cnonce&#x3D;1592823972112,response&#x3D;77d02c6589082d5afd4329ddbca2d70d</span><br><span class="line">nh_citycode: </span><br><span class="line">nh_userid: </span><br><span class="line">User-Agent: Android</span><br><span class="line">Connection: Keep-Alive</span><br><span class="line">Accept-Encoding: gzip,deflate,sdch</span><br><span class="line">nh_authorization: </span><br><span class="line">token: 0befe3865bde6ba7bf0a83e90fb2ae12</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>分析每个headers的组成<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">public static void initHttpClient(AsyncHttpClient asyncHttpClient) &#123;</span><br><span class="line">     asyncHttpClient.setTimeout(BaseImageDownloader.DEFAULT_HTTP_READ_TIMEOUT);</span><br><span class="line">     asyncHttpClient.setCookieStore(new BasicCookieStore());</span><br><span class="line">     asyncHttpClient.addHeader(&quot;token&quot;, MD5.md5(&quot;fda429742d3747f2af42d5d35fb83edd&quot;));</span><br><span class="line">     asyncHttpClient.addHeader(&quot;User-Agent&quot;, &quot;Android&quot;);</span><br><span class="line">     asyncHttpClient.addHeader(&quot;Connection&quot;, HTTP.CONN_KEEP_ALIVE);</span><br><span class="line">     asyncHttpClient.addHeader(AsyncHttpClient.HEADER_ACCEPT_ENCODING, &quot;gzip,deflate,sdch&quot;);</span><br><span class="line">     if (!Constants.BROKER_LOGIN.equals(MyPerference.getWhoLogin()) || Constants.BJ_CODE.equals(MyPerference.getBrokerCity())) &#123;</span><br><span class="line">         asyncHttpClient.addHeader(Constants.HEADER_NH_CITYCODE, &quot;&quot;);</span><br><span class="line">         asyncHttpClient.addHeader(Constants.HEADER_NH_USERID, &quot;&quot;);</span><br><span class="line">         asyncHttpClient.addHeader(Constants.HEADER_NH_AUTHORIZATION, &quot;&quot;);</span><br><span class="line">         return;</span><br><span class="line">     &#125;</span><br><span class="line">     String brokerCity &#x3D; MyPerference.getBrokerCity();</span><br><span class="line">     if (Constants.FZ_CODE.equals(brokerCity)) &#123;</span><br><span class="line">         asyncHttpClient.addHeader(Constants.HEADER_NH_CITYCODE, Constants.FZ_CODE_VALUE);</span><br><span class="line">     &#125; else if (Constants.XM_CODE.equals(brokerCity)) &#123;</span><br><span class="line">         asyncHttpClient.addHeader(Constants.HEADER_NH_CITYCODE, Constants.XM_CODE_VALUE);</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">         asyncHttpClient.addHeader(Constants.HEADER_NH_CITYCODE, &quot;&quot;);</span><br><span class="line">     &#125;</span><br><span class="line">     asyncHttpClient.addHeader(Constants.HEADER_NH_USERID, MyPerference.getUserId());</span><br><span class="line">     asyncHttpClient.addHeader(Constants.HEADER_NH_AUTHORIZATION, getNewAuthorization(MyPerference.getUserId(), MyPerference.getPassWord()));</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure></li>
<li>可以很清楚,直观的看到http初始化,token是写死的,通过MD5加密fda429742d3747f2af42d5d35fb83edd得到token的值,Connection的值是Keep-Alive…<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">token: md5(fda429742d3747f2af42d5d35fb83edd)</span><br><span class="line">User-Agent: Android</span><br><span class="line">Connection:Keep-Alive</span><br><span class="line">Accept-Encoding:gzip,deflate,sdch</span><br><span class="line">nh_citycode:&#39;&#39; # 如果是福州 为3  厦门为4 其他为空</span><br><span class="line">nh_userid: &#39;&#39; 未登录为空 </span><br><span class="line">nh_authorization:&#x3D;&gt;&#123;</span><br><span class="line">    getNewAuthorization(user, password&#123;</span><br><span class="line">        return &quot;basic &quot; + user + &quot;_&quot; + MD5Utils.getMd5Passwd(password);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">public static void getHouseSecond4(boolean z, String str, int i, AsyncHttpResponseHandler asyncHttpResponseHandler) &#123;</span><br><span class="line">      if (z) &#123;</span><br><span class="line">          AsyncHttpManager.get(&quot;houseSnd?&quot; + str + &quot;&amp;PG&#x3D;&quot; + i + &quot;&amp;PS&#x3D;&quot; + ps + &quot;&amp;isScore&#x3D;0&quot; + BJ_VILLA, new BaseRequest(), asyncHttpResponseHandler);</span><br><span class="line">          return;</span><br><span class="line">      &#125;</span><br><span class="line">      AsyncHttpManager.get(&quot;houseSnd?&quot; + str + &quot;&amp;PG&#x3D;&quot; + i + &quot;&amp;PS&#x3D;&quot; + ps + &quot;&amp;isScore&#x3D;0&quot;, new BaseRequest(), asyncHttpResponseHandler);</span><br><span class="line">  &#125;</span><br><span class="line"> public static RequestHandle get(String str, BaseRequest baseRequest, AsyncHttpResponseHandler asyncHttpResponseHandler) &#123;</span><br><span class="line">      try &#123;</span><br><span class="line">          return get(str, ModelUtil.getRequestParamsFromObject(baseRequest), ModelUtil.                             (baseRequest), asyncHttpResponseHandler);</span><br><span class="line">      &#125; catch (Exception e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">          return null;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;    </span><br><span class="line">  </span><br><span class="line">  </span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">private static void addHeaderAuthorization(AsyncHttpClient asyncHttpClient, String str, String str2, Boolean bool) &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">        asyncHttpClient.removeHeader(&quot;Authorization&quot;);</span><br><span class="line">    &#125; catch (Exception unused) &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    if (!bool.booleanValue()) &#123;</span><br><span class="line">        String authorization &#x3D; HttpClientConfig.getAuthorization(str2);</span><br><span class="line">        Log.e(&quot;Tag&quot;, &quot;Authorization:&quot; + authorization);</span><br><span class="line">        asyncHttpClient.addHeader(&quot;Authorization&quot;, authorization);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    String str3 &#x3D; &quot;Basic android_&quot; + MD5.hexdigest(&quot;android_40:0daceb80dd8a0a17&quot;);</span><br><span class="line">    asyncHttpClient.addHeader(&quot;Authorization&quot;, str3);</span><br><span class="line">    Log.e(&quot;tag&quot;, &quot;Authorization:&quot; + str3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>参数asyncHttpClient对象,str2是完整url的参数组合,getAuthorization(str2),如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line">    HEADER_ID&#x3D;aos384e9f87   写死的</span><br><span class="line">    valueOf 根据当前时间生成的时间戳</span><br><span class="line">    </span><br><span class="line">**&#x2F;</span><br><span class="line">    public static String getAuthorization(String str) &#123;</span><br><span class="line">        String valueOf &#x3D; String.valueOf(System.currentTimeMillis());</span><br><span class="line">        StringBuffer stringBuffer &#x3D; new StringBuffer();</span><br><span class="line">        stringBuffer.append(&quot;Digest username&#x3D;&quot;);</span><br><span class="line">        stringBuffer.append(HEADER_ID);</span><br><span class="line">        stringBuffer.append(&quot;,cnonce&#x3D;&quot;);</span><br><span class="line">        stringBuffer.append(valueOf);</span><br><span class="line">        stringBuffer.append(&quot;,response&#x3D;&quot;);</span><br><span class="line">        StringBuffer stringBuffer2 &#x3D; new StringBuffer();</span><br><span class="line">        if (!TextUtils.isEmpty(str)) &#123;</span><br><span class="line">            stringBuffer2.append(str);</span><br><span class="line">        &#125;</span><br><span class="line">        stringBuffer2.append(HEADER_SECRET);</span><br><span class="line">        stringBuffer2.append(valueOf);</span><br><span class="line">        Log.e(&quot;Tag&quot;, &quot;response:&quot; + stringBuffer2.toString());</span><br><span class="line">        stringBuffer.append(com.sina.weibo.sdk.utils.MD5.hexdigest(stringBuffer2.toString()));</span><br><span class="line">        return stringBuffer.toString();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>通过hook这个getAuthorization方法来获取参数和返回值:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">     public void handleLoadPackage(final RC_LoadPackage.LoadPackageParam lpparam) &#123;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;        addFloatingButtonForActivity(lpparam);</span><br><span class="line">&#x2F;&#x2F;        Log.i(tag, &quot;hook end&quot;);</span><br><span class="line">        &#x2F;&#x2F; 监听所有请求</span><br><span class="line">&#x2F;&#x2F;        SocketMonitor.setPacketEventObserver(new FileLogEventObserver(new File(RatelToolKit.whiteSdcardDirPath,&quot;socketMonitor&quot;)));</span><br><span class="line">&#x2F;&#x2F;        Log.i(TAG, &quot;hook start......&quot;);</span><br><span class="line">&#x2F;&#x2F;        RposedBridge.hookAllConstructors(URL.class, new RC_MethodHook() &#123;</span><br><span class="line">&#x2F;&#x2F;            @Override</span><br><span class="line">&#x2F;&#x2F;            protected void afterHookedMethod(MethodHookParam param) throws Throwable &#123;</span><br><span class="line">&#x2F;&#x2F;                Log.i(TAG, &quot;access url: &quot;+ param.thisObject);</span><br><span class="line">&#x2F;&#x2F;            &#125;</span><br><span class="line">&#x2F;&#x2F;        &#125;);</span><br><span class="line">&#x2F;&#x2F;        Log.i(TAG, &quot;hook end&quot;);</span><br><span class="line">        &#x2F;&#x2F;hook getAuthorization方法</span><br><span class="line">        &#x2F;&#x2F;com.jkrm.maitian.http.getAuthorization</span><br><span class="line">        Log.i(TAG, &quot;hook  findAndHookMethod start......&quot;);</span><br><span class="line">        RposedHelpers.findAndHookMethod(&quot;com.jkrm.maitian.http.HttpClientConfig&quot;, lpparam.classLoader,</span><br><span class="line">                &quot;getAuthorization&quot;, String.class, new RC_MethodHook() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    protected void afterHookedMethod(MethodHookParam param) throws Throwable &#123;</span><br><span class="line">                        super.afterHookedMethod(param);</span><br><span class="line">                        Log.i(TAG, &quot;getAuthorization param1&quot;+param.args[0]+&quot;result&quot;+param.getResult(),new Throwable());</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">        Log.i(TAG, &quot;hook findAndHookMethod end&quot;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></li>
<li>获取到的参数和返回值如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">param:</span><br><span class="line">appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1brokerid&#x3D;f9c4fb060aafd777channelid&#x3D;maitianwebdeviceid&#x3D;f9c4fb060aafd777from&#x3D;3housecode&#x3D;FY00811104model&#x3D;MI 8platform&#x3D;androidsystemversion&#x3D;10versioncode&#x3D;55versionname&#x3D;3.2.28ba449f29acf1592894282163</span><br><span class="line">appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1brokerid&#x3D;f9c4fb060aafd777channelid&#x3D;maitianwebdeviceid&#x3D;f9c4fb060aafd777from&#x3D;3housecode&#x3D;FY00677063model&#x3D;MI 8platform&#x3D;androidsystemversion&#x3D;10versioncode&#x3D;55versionname&#x3D;3.2.28ba449f29acf1592894282163</span><br><span class="line">result:Digest username&#x3D;aos384e9f87,cnonce&#x3D;1592894282163,response&#x3D;1cb6d3fe669c6dc7409bfe106d706577</span><br></pre></td></tr></table></figure></li>
<li>由此得出getAuthorization验证的步骤以及原理是:<ol>
<li>先组装result部分,username是写死的,cnonce是时间戳,response是根据param加上HEADER_SECRET加上时间戳进行MD5加密得到的</li>
<li>从url中取得所有的param</li>
<li>将param和时间戳以及secret组成新字符串进行MD5加密</li>
<li>得到新的字符串赋值给response</li>
<li>最后返回出去</li>
<li>代码如下<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">API_URL &#x3D; &quot;https:&#x2F;&#x2F;app.maitian.cn&#x2F;service&#x2F;HouseSecond&#x2F;Detail?HouseCode&#x3D;&#123;&#125;&amp;memberId&#x3D;&amp;from&#x3D;3&amp;brokerid&#x3D;f9c4fb060aafd777&amp;appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1&amp;channelId&#x3D;maitianweb&amp;deviceId&#x3D;f9c4fb060aafd777&amp;platform&#x3D;android&amp;systemVersion&#x3D;10&amp;versionCode&#x3D;55&amp;versionName&#x3D;3.2.2&quot;</span><br><span class="line">LIST_URL &#x3D; &quot;https:&#x2F;&#x2F;app.maitian.cn&#x2F;service&#x2F;houseSnd?memberId&#x3D;&amp;memberEmobName&#x3D;&amp;touristId&#x3D;&amp;touristEmobName&#x3D;&amp;pushmsg&#x3D;1&amp;PG&#x3D;1&amp;PS&#x3D;20&amp;isScore&#x3D;0&amp;isAnalysis&#x3D;1&amp;appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1&amp;channelId&#x3D;maitianweb&amp;deviceId&#x3D;f9c4fb060aafd777&amp;platform&#x3D;android&amp;systemVersion&#x3D;10&amp;versionCode&#x3D;55&amp;versionName&#x3D;3.2.2&quot;</span><br><span class="line">HEADER_SECRET &#x3D; &quot;8ba449f29acf&quot;</span><br><span class="line">HEADER_ID &#x3D; &quot;aos384e9f87&quot;</span><br><span class="line"></span><br><span class="line">def get_param(url):</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    1. 把url参数全部提取</span><br><span class="line">    2. 剔除空值的参数</span><br><span class="line">    3. 按照字典序排序</span><br><span class="line"></span><br><span class="line">    :param url: 完整URL</span><br><span class="line">    :return:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    url_param &#x3D; url.split(&quot;?&quot;)[1]</span><br><span class="line">    param_list &#x3D; list()</span><br><span class="line">    for param_dict in url_param.split(&quot;&amp;&quot;):</span><br><span class="line">        key &#x3D; param_dict.split(&quot;&#x3D;&quot;)[0]</span><br><span class="line">        value &#x3D; param_dict.split(&quot;&#x3D;&quot;)[1]</span><br><span class="line">        if value &#x3D;&#x3D; &quot;&quot; or value is None:</span><br><span class="line">            continue</span><br><span class="line">        param_list.append(key.lower()+&quot;&#x3D;&quot;+value)</span><br><span class="line"></span><br><span class="line">    return str(sorted(param_list, key&#x3D;str.lower)).replace(&quot;,&quot;, &quot;&quot;).replace(&quot;]&quot;, &quot;&quot;).replace(&quot;[&quot;, &quot;&quot;).replace(&quot;&#39;&quot;, &quot;&quot;).replace(&quot; &quot;, &quot;&quot;)</span><br><span class="line"></span><br><span class="line">    def getAuthorization(url):</span><br><span class="line">    valueof &#x3D; int(time.time()*1000)</span><br><span class="line">    param &#x3D; get_param(url).replace(&quot;+&quot;, &quot; &quot;)</span><br><span class="line">    print(&quot;param:&quot;, param)</span><br><span class="line">    resp_value &#x3D; param+HEADER_SECRET+str(valueof)</span><br><span class="line">    print(&quot;resp:&quot;, resp_value)</span><br><span class="line">    resp_str &#x3D; &quot;Digest username&#x3D;&#123;&#125;,cnonce&#x3D;&#123;&#125;,response&#x3D;&#123;&#125;&quot;.format(HEADER_ID, valueof, hashlib.md5(resp_value.encode()).hexdigest())</span><br><span class="line">    return resp_str</span><br><span class="line"></span><br><span class="line">if __name__ &#x3D;&#x3D; &#39;__main__&#39;:</span><br><span class="line">  authorizetion &#x3D; getAuthorization(LIST_URL)</span><br><span class="line">  print(authorizetion)</span><br><span class="line">  headers &#x3D; &#123;</span><br><span class="line">      &quot;Host&quot;: &quot;app.maitian.cn&quot;,</span><br><span class="line">      &quot;Authorization&quot;: authorizetion,</span><br><span class="line">      &quot;nh_citycode&quot;: &quot;&quot;,</span><br><span class="line">      &quot;nh_userid&quot;: &quot;&quot;,</span><br><span class="line">      &quot;User-Agent&quot;: &quot;Android&quot;,</span><br><span class="line">      &quot;Connection&quot;: &quot;Keep-Alive&quot;,</span><br><span class="line">      &quot;Accept-Encoding&quot;: &quot;gzip,deflate,sdch&quot;,</span><br><span class="line">      &quot;nh_authorization&quot;: &quot;&quot;,</span><br><span class="line">      &quot;token&quot;: &quot;0befe3865bde6ba7bf0a83e90fb2ae12&quot;,</span><br><span class="line">  &#125;</span><br><span class="line">  res &#x3D; requests.get(url&#x3D;LIST_URL, headers&#x3D;headers)</span><br><span class="line">  print(res.text.encode(&#39;unicode_escape&#39;).decode(&#39;unicode_escape&#39;))</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li>列表页URL：其中pg是可以变化的,表示当前URL请求的页码数,X和Y表示经纬度,可以不要,model也可以不要<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;app.maitian.cn&#x2F;service&#x2F;houseSnd?memberId&#x3D;&amp;memberEmobName&#x3D;&amp;touristId&#x3D;&amp;touristEmobName&#x3D;&amp;pushmsg&#x3D;1&amp;PG&#x3D;2&amp;PS&#x3D;20&amp;isScore&#x3D;0&amp;X&#x3D;113.959601&amp;Y&#x3D;22.547524&amp;isAnalysis&#x3D;1&amp;appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1&amp;channelId&#x3D;maitianweb&amp;deviceId&#x3D;f9c4fb060aafd777&amp;model&#x3D;MI+8&amp;platform&#x3D;android&amp;systemVersion&#x3D;10&amp;versionCode&#x3D;55&amp;versionName&#x3D;3.2.2</span><br></pre></td></tr></table></figure></li>
<li>详情页URL: HouseCode从列表页中区,表示房源编号<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;app.maitian.cn&#x2F;service&#x2F;HouseSecond&#x2F;Detail?HouseCode&#x3D;&#123;&#125;&amp;memberId&#x3D;&amp;from&#x3D;3&amp;brokerid&#x3D;f9c4fb060aafd777&amp;appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1&amp;channelId&#x3D;maitianweb&amp;deviceId&#x3D;f9c4fb060aafd777&amp;platform&#x3D;android&amp;systemVersion&#x3D;10&amp;versionCode&#x3D;55&amp;versionName&#x3D;3.2.2</span><br></pre></td></tr></table></figure></li>
<li>小区详情页: 直接通过获取所有区域编号的方式直接获取小区详情页,不通过小区列表页的方式,参数是小区的id编码<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:&#x2F;&#x2F;app.maitian.cn&#x2F;service&#x2F;Garden&#x2F;Detail?&#123;&#125;&amp;from&#x3D;3&amp;PG&#x3D;1&amp;PS&#x3D;20&amp;appid&#x3D;aadc9abe17f54007b5cca7a2513cb8b1&amp;channelId&#x3D;maitianweb&amp;deviceId&#x3D;f9c4fb060aafd777&amp;platform&#x3D;android&amp;systemVersion&#x3D;10&amp;versionCode&#x3D;55&amp;versionName&#x3D;3.2.2</span><br></pre></td></tr></table></figure>
<h3 id="使用总结"><a href="#使用总结" class="headerlink" title="使用总结"></a>使用总结</h3></li>
<li>下载好ratel manager,上传带感染apk,感染apk完成之后pc端留一份,另一份装到手机上</li>
<li>打开ratel manager,找到感染应用选项,安装在手机上的apk会自动被扫描进去</li>
<li>下载<a target="_blank" rel="noopener" href="https://github.com/skylot/jadx">jadx</a>,使用jadx打开apk,导出gradle工程</li>
<li>下载Android Studio,使用AS打开刚刚导出的gradle工程(主要作用是分析源码)</li>
<li>下载ratel-demo,推荐直接使用git, <code>git clone --recursivegit@git.virjar.com:ratel/ratel-demo.git</code>下载即可</li>
<li>使用AS打开此项目,生成对应的插件模块,编写自定义功能<ol>
<li>生成模块命令:<code>./template.sh  -m crack-wechat -a path </code> -m表示要创建的插件名称,-a 对应的是已破解感染好的apk的路径</li>
<li>生成要注意的事项,也可以说是AS的注意事项,sdk版本不对应会产生错误,proxy setting错误会导致错误,proxy setting选择no proxy选项,我们使用阿里云的镜像云,connection的错误一般都是proxy的问题,可以检查一下是否删除干净,如果设置了一次,AS会把选项内容写入到~/.gradle/gradle.properties文件中,我们必须手动删除有关proxy选项,</li>
<li>生成成功之后在HookEntry写插件功能</li>
<li>启动apk,会根据功能做出相关的操作</li>
<li>根据查看日志和查看源代码的形式分析出所需要的功能</li>
</ol>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/%E6%8A%93%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/%E6%8A%93%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/" class="post-title-link" itemprop="url">抓取小程序</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 17:10:57 / 修改时间：17:42:37" itemprop="dateCreated datePublished" datetime="2021-02-04T17:10:57+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="什么是Whistle"><a href="#什么是Whistle" class="headerlink" title="什么是Whistle"></a>什么是Whistle</h2><h4 id="简单的说whistle-是一个跨平台的抓包与-web-debug-工具，用来抓包-数据"><a href="#简单的说whistle-是一个跨平台的抓包与-web-debug-工具，用来抓包-数据" class="headerlink" title="简单的说whistle 是一个跨平台的抓包与 web debug 工具，用来抓包(数据)"></a>简单的说whistle 是一个跨平台的抓包与 web debug 工具，用来抓包(数据)</h4><h2 id="安装Whistle"><a href="#安装Whistle" class="headerlink" title="安装Whistle"></a>安装Whistle</h2><ul>
<li>1.安装<a target="_blank" rel="noopener" href="https://nodejs.org/">node</a>,默认安装即可啦</li>
<li>2.检查一下是否安装成功 node -v</li>
<li>3.终端输入npm install -g whistle</li>
<li>4.启动whistle: w2 start</li>
<li>5.重启whistle: w2 restart</li>
<li>6.停止whistle: w2 stop</li>
<li>7.指定端口: w2 start -p xxx(端口号)  //如果不指定默认8899<br>###使用whistle</li>
<li>1.启动whistle之后在地址栏输入你的ip+端口号即可</li>
<li>2.手机和电脑必须同一个网络，手机设置wifi的http代理，服务器地址改为电脑的IP地址，端口设置为whistle启动时的端口<br>###https的抓包</li>
<li>1.在whistle界面点击HTTPS-&gt;点击Download RootCA,记得把（Capture TUNNEL CONNECTs）打钩，下载之后安装在本地计算机，选择第二个选项(将所有的证书放在下列存储)-&gt;浏览-&gt;受信任的根证书颁发机构-&gt;确定</li>
<li>2.手机浏览器地址栏输入rootca.pro，然后下载好证书并且安装</li>
<li>3.打开微信小程序(目标)，我随便搜了一个（注意，微信版本现在7.0以上似乎抓取不到https）<br><img src="/img/%E6%8A%93%E5%8F%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/cat.png" alt="image.png"></li>
<li>4.完工</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/child/2021/02/04/title/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
      <meta itemprop="name" content="changan">
      <meta itemprop="description" content="欢迎您的到来！">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="威猛的小老虎">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/child/2021/02/04/title/" class="post-title-link" itemprop="url">换IP之坑</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2021-02-04 16:01:00 / 修改时间：17:42:31" itemprop="dateCreated datePublished" datetime="2021-02-04T16:01:00+08:00">2021-02-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h4 id="起因客户换了ip和路由器，导致系统需要重新配置"><a href="#起因客户换了ip和路由器，导致系统需要重新配置" class="headerlink" title="起因客户换了ip和路由器，导致系统需要重新配置"></a>起因客户换了ip和路由器，导致系统需要重新配置</h4><ul>
<li>首先是app换ip,重新打包</li>
<li>其次是后端换ip,重新rebuild</li>
<li>最后是前端换ip,rebuild</li>
</ul>
<h5 id="我以为这三步就完事了，没想到service服务跑不起来，看了一下log，发现是zookpper的问题，就想着把zookpper干掉，然后发现删除了镜像和容器，rebuild失败！好奇去看了一下log，not-found-image！我的天，找不到镜像-进入服务器试试"><a href="#我以为这三步就完事了，没想到service服务跑不起来，看了一下log，发现是zookpper的问题，就想着把zookpper干掉，然后发现删除了镜像和容器，rebuild失败！好奇去看了一下log，not-found-image！我的天，找不到镜像-进入服务器试试" class="headerlink" title="我以为这三步就完事了，没想到service服务跑不起来，看了一下log，发现是zookpper的问题，就想着把zookpper干掉，然后发现删除了镜像和容器，rebuild失败！好奇去看了一下log，not found image！我的天，找不到镜像,进入服务器试试"></a>我以为这三步就完事了，没想到service服务跑不起来，看了一下log，发现是zookpper的问题，就想着把zookpper干掉，然后发现删除了镜像和容器，rebuild失败！好奇去看了一下log，not found image！我的天，找不到镜像,进入服务器试试</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker search zookeeper</span><br><span class="line">Error response from daemon: Get https:&#x2F;&#x2F;index.docker.io&#x2F;v1&#x2F;search?q&#x3D;zookeeper&amp;n&#x3D;25: dial tcp: lookup 221.138.164.6</span><br></pre></td></tr></table></figure>
<h4 id="看起来是网络问题，看看网络"><a href="#看起来是网络问题，看看网络" class="headerlink" title="看起来是网络问题，看看网络"></a>看起来是网络问题，看看网络</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat &#x2F;etc&#x2F;resolv.conf</span><br><span class="line"># Generated by NetworkManager</span><br><span class="line">nameserver 221.176.88.95</span><br><span class="line">nameserver 221.138.164.6</span><br></pre></td></tr></table></figure>
<h5 id="尝试改了然后重启网卡-service-restart-network-再看-etc-resolv-conf，发现和没改之前一样，奇了怪了-随后发现是要更改-etc-sysconfig-network-scripts-ifcfg-eth0-修改dns就成功了。"><a href="#尝试改了然后重启网卡-service-restart-network-再看-etc-resolv-conf，发现和没改之前一样，奇了怪了-随后发现是要更改-etc-sysconfig-network-scripts-ifcfg-eth0-修改dns就成功了。" class="headerlink" title="尝试改了然后重启网卡 service restart network,再看/etc/resolv.conf，发现和没改之前一样，奇了怪了,随后发现是要更改 /etc/sysconfig/network-scripts/ifcfg-eth0,修改dns就成功了。"></a>尝试改了然后重启网卡 service restart network,再看/etc/resolv.conf，发现和没改之前一样，奇了怪了,随后发现是要更改 /etc/sysconfig/network-scripts/ifcfg-eth0,修改dns就成功了。</h5><h5 id="改好之后重启-开放端口！成功解决"><a href="#改好之后重启-开放端口！成功解决" class="headerlink" title="改好之后重启 开放端口！成功解决"></a>改好之后重启 开放端口！成功解决</h5>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="changan"
      src="https://tse3-mm.cn.bing.net/th/id/OIP.PELhtJVzLPdNGbZA8ABztQAAAA?pid=ImgDet&rs=1">
  <p class="site-author-name" itemprop="name">changan</p>
  <div class="site-description" itemprop="description">欢迎您的到来！</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/child/archives/">
        
          <span class="site-state-item-count">7</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">changan</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/child/lib/anime.min.js"></script>
  <script src="/child/lib/velocity/velocity.min.js"></script>
  <script src="/child/lib/velocity/velocity.ui.min.js"></script>

<script src="/child/changan/js/utils.js"></script>

<script src="/child/changan/js/motion.js"></script>


<script src="/child/changan/js/schemes/pisces.js"></script>


<script src="/child/changan/js/next-boot.js"></script>




  















  

  

</body>
</html>
